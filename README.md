# Photo Watermark 2 - 图片水印工具

## 项目概述

Photo Watermark 2 是一个功能强大的Windows桌面应用程序，用于为图片添加水印。支持文本水印和图片水印，提供直观的图形界面和丰富的自定义选项。

## 功能需求

### 1. 文件处理
- **导入图片**：支持单张图片拖拽或文件选择器导入，支持批量导入和文件夹导入
- **格式支持**：输入格式支持JPEG、PNG、BMP、TIFF，PNG支持透明通道
- **导出功能**：可选择输出格式(JPEG/PNG)，自定义输出文件夹和文件命名规则
- **高级功能**：JPEG质量调节、图片尺寸调整

### 2. 水印类型
- **文本水印**：自定义文本内容、字体样式、颜色、透明度
- **图片水印**：支持PNG透明图片作为水印，可调整大小和透明度

### 3. 水印布局与样式
- **实时预览**：所有调整实时显示效果
- **位置控制**：九宫格预设位置 + 手动拖拽定位
- **旋转功能**：支持任意角度旋转水印

### 4. 配置管理
- **模板系统**：保存、加载、管理水印模板
- **设置持久化**：自动保存和恢复用户设置

## 技术设计

### 架构设计
```
Photo_Watermark_2/
├── main.py                 # 主应用程序入口
├── image_processor.py      # 图片处理模块
├── watermark_manager.py    # 水印管理模块
├── config_manager.py       # 配置管理模块
├── requirements.txt        # 依赖库列表
├── build_exe.py           # Windows可执行文件构建脚本
└── README.md              # 项目说明文档
```

### 技术栈
- **GUI框架**：tkinter (Python内置，无需额外安装)
- **图像处理**：PIL/Pillow (支持多种图片格式)
- **文件操作**：os, pathlib (标准库)
- **配置存储**：json (标准库)
- **打包工具**：PyInstaller (生成Windows可执行文件)

### 核心模块设计

#### 1. main.py - 主应用程序
- 创建主窗口和界面布局
- 处理用户交互事件
- 协调各模块之间的数据传递
- 实现拖拽导入功能

#### 2. image_processor.py - 图片处理
- 图片导入和格式验证
- 图片格式转换和导出
- 图片尺寸调整和质量控制
- 缩略图生成

#### 3. watermark_manager.py - 水印管理
- 文本水印渲染和样式控制
- 图片水印处理和透明度控制
- 水印位置计算和旋转处理
- 水印与图片的合成

#### 4. config_manager.py - 配置管理
- 水印模板的保存和加载
- 用户设置的持久化存储
- 默认配置管理

## 开发计划

1. **第一阶段**：基础框架搭建和核心功能实现
2. **第二阶段**：高级功能和用户体验优化
3. **第三阶段**：Windows可执行文件打包和测试

## 安装和运行

### 环境要求
- Python 3.7+
- Windows 10/11

### 快速开始
1. **安装依赖**
```bash
pip install -r requirements.txt
```

2. **测试程序**
```bash
python test_app.py
```

3. **运行应用**
```bash
python main.py
```

### 构建可执行文件
```bash
python build_exe.py
```

构建完成后会生成：
- `dist/PhotoWatermark2.exe` - 单文件可执行版本
- `PhotoWatermark2_Portable/` - 便携版本文件夹

### 文件说明
- `main.py` - 主程序入口
- `image_processor.py` - 图片处理模块
- `watermark_manager.py` - 水印管理模块  
- `config_manager.py` - 配置管理模块
- `build_exe.py` - Windows可执行文件构建脚本
- `test_app.py` - 模块测试脚本
- `USAGE.md` - 详细使用说明

## 使用说明

1. **导入图片**：拖拽图片到应用窗口或点击"选择图片"按钮
2. **设置水印**：在右侧面板配置水印内容和样式
3. **调整位置**：在预览图中拖拽水印到合适位置
4. **导出图片**：设置输出文件夹和命名规则，点击"导出"按钮

## 许可证

MIT License