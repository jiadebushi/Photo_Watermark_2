# Photo Watermark 2 - 安装说明

## 📋 系统要求

- **操作系统**：Windows 10/11（推荐），macOS，Linux
- **Python版本**：Python 3.7 或更高版本
- **磁盘空间**：至少 100MB

## 🚀 快速安装

### 方法1：使用 requirements.txt（推荐）

```bash
# 1. 克隆或下载项目
cd Photo_Watermark_2

# 2. 安装所有依赖
pip install -r requirements.txt

# 3. 运行程序
python main.py
```

### 方法2：手动安装依赖

```bash
# 安装图像处理库
pip install Pillow>=9.0.0

# 安装拖拽支持库
pip install tkinterdnd2>=0.3.0

# 安装打包工具（可选）
pip install pyinstaller>=5.0.0

# 运行程序
python main.py
```

## 📦 依赖说明

### 必需依赖

1. **Pillow (PIL)**
   - 用途：图像处理和水印添加
   - 版本：>= 9.0.0
   - 安装：`pip install Pillow`

2. **tkinterdnd2**
   - 用途：拖拽导入功能
   - 版本：>= 0.3.0
   - 安装：`pip install tkinterdnd2`

### 可选依赖

3. **PyInstaller**
   - 用途：打包为独立可执行文件
   - 版本：>= 5.0.0
   - 安装：`pip install pyinstaller`

## 🔧 常见问题

### 问题1：tkinterdnd2 安装失败

**解决方案**：
```bash
# 尝试升级 pip
python -m pip install --upgrade pip

# 重新安装
pip install tkinterdnd2
```

如果仍然失败，程序会自动禁用拖拽功能，可以使用按钮导入图片。

### 问题2：Pillow 安装失败

**解决方案**：
```bash
# Windows
pip install Pillow --user

# macOS/Linux
sudo pip install Pillow
```

### 问题3：中文字体不显示

**解决方案**：
程序会自动检测系统中文字体：
- Windows：微软雅黑、宋体、黑体
- macOS：需要安装中文字体
- Linux：需要安装中文字体包

### 问题4：程序启动慢

**解决方案**：
- 首次启动会加载字体列表，稍慢是正常的
- 后续启动会快很多

## 🎯 验证安装

### 运行测试脚本

```bash
python test_app.py
```

应该看到：
```
✓ 依赖库检查 通过
✓ 模块导入测试 通过
✓ 图片处理器测试 通过
✓ 水印管理器测试 通过
✓ 配置管理器测试 通过
测试结果: 5/5 通过
🎉 所有测试通过！程序可以正常运行。
```

### 检查拖拽功能

启动程序后，在控制台查看：
```
✓ 拖拽功能已启用
```

如果看到此消息，说明拖拽功能正常。

## 📱 打包为可执行文件

### Windows

```bash
# 运行打包脚本
python build_exe.py

# 生成的文件
dist/PhotoWatermark2.exe              # 单文件版本
PhotoWatermark2_Portable/             # 便携版本
```

### macOS/Linux

```bash
# 使用 PyInstaller
pyinstaller --onefile --windowed --name=PhotoWatermark2 main.py
```

## 🔄 更新程序

```bash
# 更新依赖库
pip install --upgrade -r requirements.txt

# 运行程序
python main.py
```

## 💡 开发环境设置

如果你想修改代码：

```bash
# 安装开发依赖
pip install -r requirements.txt

# 运行测试
python test_app.py

# 启动程序
python main.py
```

## 📞 获取帮助

- 查看 **功能清单.md** 了解所有功能
- 查看 **USAGE.md** 了解详细使用方法
- 查看 **拖拽导入说明.md** 了解拖拽功能

## ✅ 安装完成检查清单

- [ ] Python 3.7+ 已安装
- [ ] 所有依赖已安装（运行 `pip list` 检查）
- [ ] 测试脚本通过（运行 `python test_app.py`）
- [ ] 程序可以启动（运行 `python main.py`）
- [ ] 拖拽功能正常（看到"拖拽功能已启用"消息）

全部完成后，即可开始使用 Photo Watermark 2！🎉

